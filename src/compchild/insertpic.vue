<template>
	<div class="emoji">
		<div class="emojiBox">
			<div class="emojiTitle">
				<div class="emojisTitle">
					<ul>
						<li v-for='(item, index) in emojis.emojis_type' @click='showPics($event, item, index, "emojis")' :class='{emActive: strCurEmoji == item[1]}'>
							{{item[0]}}
						</li>
					</ul>
				</div>
				<div class="smiliesTitle">
					<ul>
						<li v-for='(item, index) in smilies.smilies_type' @click='showPics($event, item, index, "smilies")' :class='{emActive: strCurEmoji == item[1]}'>
							{{item[0]}}
						</li>
					</ul>
				</div>
			</div>

			<div class="emojiCon clearfix">
				<ul class="clearfix">
					<li v-for='item in curpics' class="clearfix">
						<ul class="clearfix">
							<li v-for='(zitem, index) in item' v-html='zitem.html' @click='returnImg($event)'>

								<!-- {{zitem.html}} -->

								<!-- <img :name='zitem.id.split("_")[0]' :src='zitem.src' :alt='zitem.id' @click='returnImg($event)'> -->
							</li>
						</ul>
					</li>
				</ul>
			</div>

			<!-- <div class="clearfix" style="width: 200%;">
				<div style="background: red; height: 500px; width: 50%; float: left;"></div>
			    <div style="background: yellow; height: 500px; width: 50%; float: left;"></div>
			</div> -->
		</div>
	</div>
</template>
<script type="text/javascript" charset="utf-8" async defer>
	import css from './../less/insertpic.less';
	// import blanckPng from './../images/b.png';
	export default({
		data() {
			return {
				emojis: {
					emojis_type: [
						['默认', 'emoji'],
					],
					emojis_array: [
						[
							['0', '{:emoji_1_0:}','emoji_0.png'],
						],
					],
					emoji_num: 189,
				},
				smilies: {
					smilies_type: [
						// ['小兔子', 'default'],
						// ['馒头', 'coolmonkey'],
						// ['小黄人', 'grapeman'],
						// ['张小饭', 'comcom'],
						// ['嗷大喵', 'aodamiao'],
					],
					smilies_array: [
						// [
						// 	['184', '{:1_184:}','125R21V4O0-BUM.gif','20','20','50'],
						// 	['167', '{:1_167:}','125R21Uc10-451414.gif','17','20','42'],
						// 	['166', '{:1_166:}','125R21UQZ-3M957.gif','20','20','50'],
						// 	['165', '{:1_165:}','125R21V4b0-C1208.gif','17','20','42'],
						// 	['164', '{:1_164:}','125R21V2920-5b501.jpg','18','20','45'],
						// 	['163', '{:1_163:}','125R21UaZ-4414T.jpg','17','20','42'],
						// 	['162', '{:1_162:}','125R21V1320-516013.jpg','20','20','49'],
						// 	['161', '{:1_161:}','125R21UZ30-41S22.gif','20','20','50'],
						// 	['160', '{:1_160:}','125R21V0930-503138.gif','20','20','50'],
						// 	['159', '{:1_159:}','125R21UU60-394246.gif','20','20','50'],
						// 	['158', '{:1_158:}','125R21V1K0-534F1.gif','20','20','50'],
						// 	['157', '{:1_157:}','125R21V0560-4W2V.gif','20','20','50'],
						// 	['156', '{:1_156:}','125R21V1450-5244D.gif','20','20','50'],
						// 	['155', '{:1_155:}','125R21V5430-E24Y.gif','20','20','50'],
						// 	['168', '{:1_168:}','125R21UX40-405596.gif','20','20','50'],
						// 	['169', '{:1_169:}','125R21V5240-DQ19.gif','20','20','50'],
						// 	['183', '{:1_183:}','125R21UF10-323363.jpg','20','20','50'],
						// 	['182', '{:1_182:}','125R21V24Z-5M1W.gif','20','20','50'],
						// 	['181', '{:1_181:}','125R21UT0-3T5L.gif','20','20','50'],
						// 	['180', '{:1_180:}','125R21UGP-33L10.gif','13','20','31'],
						// 	['179', '{:1_179:}','125R21V2C0-5Q642.gif','17','20','42'],
						// 	['178', '{:1_178:}','125R21UD10-319214.gif','20','20','50'],
						// 	['176', '{:1_176:}','125R21V010-461Y5.gif','17','20','42'],
						// 	['175', '{:1_175:}','125R21V3510-611000.gif','20','20','50'],
						// 	['174', '{:1_174:}','125R21V1930-54HM.jpg','20','20','50'],
						// 	['173', '{:1_173:}','125R21V2060-552146.gif','20','20','50'],
						// 	['172', '{:1_172:}','125R21V2250-5B564.gif','13','20','31'],
						// 	['171', '{:1_171:}','125R21UM50-3594D.gif','20','20','50'],
						// 	['170', '{:1_170:}','125R21UJ40-346024.gif','20','20','50'],
						// 	['154', '{:1_154:}','125R21V3940-636324.gif','20','20','50'],
						// 	['153', '{:1_153:}','125R21UO60-3E132.gif','20','20','50'],
						// 	['152', '{:1_152:}','125R21U9440-4321K.gif','17','20','42'],
						// 	['151', '{:1_151:}','125R21V43F-AH28.gif','20','20','50'],
						// 	['150', '{:1_150:}','125R21V0G0-495a8.gif','17','20','42'],
						// 	['149', '{:1_149:}','125R21V3P-62YC.jpg','18','20','43'],
						// 	['148', '{:1_148:}','125R21V03P-4G603.jpg','20','20','50'],
						// 	['147', '{:1_147:}','125R21U9240-422512.gif','16','20','40'],
						// 	['177', '{:1_177:}','125R21V41P-645944.gif','20','20','50']
						// ],
						// [
						// 	['188', '{:2_188:}','20.gif','20','20','50'],
						// 	['187', '{:2_187:}','18.gif','20','20','50'],
						// 	['186', '{:2_186:}','17.gif','20','20','50'],
						// 	['185', '{:2_185:}','19.gif','20','20','50'],
						// 	['25', '{:2_25:}','01.gif','20','20','50'],
						// 	['26', '{:2_26:}','02.gif','20','20','50'],
						// 	['27', '{:2_27:}','03.gif','20','20','50'],
						// 	['28', '{:2_28:}','04.gif','20','20','50'],
						// 	['29', '{:2_29:}','05.gif','20','20','50'],
						// 	['30', '{:2_30:}','06.gif','20','20','50'],
						// 	['31', '{:2_31:}','07.gif','20','20','50'],
						// 	['32', '{:2_32:}','08.gif','20','20','50'],
						// 	['33', '{:2_33:}','09.gif','20','20','50'],
						// 	['34', '{:2_34:}','10.gif','20','20','50'],
						// 	['35', '{:2_35:}','11.gif','20','20','50'],
						// 	['36', '{:2_36:}','12.gif','20','20','50'],
						// 	['37', '{:2_37:}','13.gif','20','20','50'],
						// 	['38', '{:2_38:}','14.gif','20','20','50'],
						// 	['39', '{:2_39:}','15.gif','20','20','50'],
						// 	['40', '{:2_40:}','16.gif','20','20','50']
						// ],
						// [
						// 	['146', '{:3_146:}','9.gif','20','10','50'],
						// 	['136', '{:3_136:}','3.png','20','19','50'],
						// 	['137', '{:3_137:}','5.png','20','19','50'],
						// 	['138', '{:3_138:}','6.png','20','16','50'],
						// 	['139', '{:3_139:}','1.png','20','13','50'],
						// 	['140', '{:3_140:}','7.png','20','18','50'],
						// 	['141', '{:3_141:}','8.gif','20','11','50'],
						// 	['142', '{:3_142:}','2.png','16','20','40'],
						// 	['143', '{:3_143:}','4.png','20','11','50'],
						// 	['144', '{:3_144:}','21.png','20','14','50'],
						// 	['145', '{:3_145:}','22.png','20','19','50'],
						// 	['50', '{:3_50:}','10.gif','20','10','50'],
						// 	['51', '{:3_51:}','11.gif','20','12','50'],
						// 	['52', '{:3_52:}','12.gif','20','11','50'],
						// 	['53', '{:3_53:}','13.gif','20','20','50'],
						// 	['54', '{:3_54:}','14.gif','20','12','50'],
						// 	['55', '{:3_55:}','15.gif','20','12','50'],
						// 	['56', '{:3_56:}','16.gif','20','9','50'],
						// 	['57', '{:3_57:}','17.gif','20','12','50'],
						// 	['58', '{:3_58:}','18.gif','20','9','50'],
						// 	['59', '{:3_59:}','19.gif','20','12','50'],
						// 	['60', '{:3_60:}','20.gif','20','11','50'],
						// 	['64', '{:3_64:}','24.gif','20','15','50']
						// ],
						// [
						// 	['204', '{:4_204:}','44.gif','20','20','50'],
						// 	['191', '{:4_191:}','33.gif','20','20','50'],
						// 	['190', '{:4_190:}','41.gif','20','20','50'],
						// 	['189', '{:4_189:}','39.gif','20','20','50'],
						// 	['115', '{:4_115:}','9.gif','20','20','50'],
						// 	['114', '{:4_114:}','8.gif','20','20','50'],
						// 	['113', '{:4_113:}','7.gif','20','20','50'],
						// 	['112', '{:4_112:}','6.gif','20','20','50'],
						// 	['111', '{:4_111:}','5.gif','20','20','50'],
						// 	['110', '{:4_110:}','4.gif','20','20','50'],
						// 	['192', '{:4_192:}','40.gif','20','20','50'],
						// 	['193', '{:4_193:}','46.gif','20','20','50'],
						// 	['194', '{:4_194:}','32.gif','20','20','50'],
						// 	['203', '{:4_203:}','35.gif','20','20','50'],
						// 	['202', '{:4_202:}','43.gif','20','20','50'],
						// 	['201', '{:4_201:}','36.gif','20','20','50'],
						// 	['200', '{:4_200:}','34.gif','20','20','50'],
						// 	['199', '{:4_199:}','38.gif','20','20','50'],
						// 	['198', '{:4_198:}','42.gif','20','20','50'],
						// 	['197', '{:4_197:}','37.gif','20','17','50'],
						// 	['196', '{:4_196:}','31.gif','20','20','50'],
						// 	['195', '{:4_195:}','45.gif','20','20','50'],
						// 	['109', '{:4_109:}','30.gif','20','20','50'],
						// 	['108', '{:4_108:}','3.gif','20','20','50'],
						// 	['95', '{:4_95:}','18.gif','20','20','50'],
						// 	['94', '{:4_94:}','17.gif','20','20','50'],
						// 	['93', '{:4_93:}','16.gif','20','20','50'],
						// 	['92', '{:4_92:}','15.gif','20','20','50'],
						// 	['91', '{:4_91:}','14.gif','20','20','50'],
						// 	['90', '{:4_90:}','13.gif','20','20','50'],
						// 	['89', '{:4_89:}','12.gif','20','20','50'],
						// 	['88', '{:4_88:}','11.gif','20','20','50'],
						// 	['87', '{:4_87:}','10.gif','20','20','50'],
						// 	['96', '{:4_96:}','19.gif','20','20','50'],
						// 	['97', '{:4_97:}','2.gif','20','20','50'],
						// 	['98', '{:4_98:}','20.gif','20','20','50'],
						// 	['107', '{:4_107:}','29.gif','20','20','50'],
						// 	['106', '{:4_106:}','28.gif','20','20','50'],
						// 	['105', '{:4_105:}','27.gif','20','20','50'],
						// 	['104', '{:4_104:}','26.gif','20','20','50'],
						// 	['103', '{:4_103:}','25.gif','20','20','50'],
						// 	['102', '{:4_102:}','24.gif','20','20','50'],
						// 	['101', '{:4_101:}','23.gif','20','20','50'],
						// 	['100', '{:4_100:}','22.gif','20','20','50'],
						// 	['99', '{:4_99:}','21.gif','20','20','50'],
						// 	['86', '{:4_86:}','1.gif','20','20','50']
						// ],
						// [
						// 	['116', '{:5_116:}','1.gif','20','20','50'],
						// 	['127', '{:5_127:}','12.gif','20','20','50'],
						// 	['128', '{:5_128:}','13.gif','20','20','50'],
						// 	['129', '{:5_129:}','14.gif','20','20','50'],
						// 	['130', '{:5_130:}','15.gif','20','20','50'],
						// 	['131', '{:5_131:}','16.gif','20','20','50'],
						// 	['132', '{:5_132:}','17.gif','20','20','50'],
						// 	['133', '{:5_133:}','18.gif','20','20','50'],
						// 	['134', '{:5_134:}','19.gif','20','20','50'],
						// 	['126', '{:5_126:}','11.gif','20','20','50'],
						// 	['125', '{:5_125:}','10.gif','20','20','50'],
						// 	['117', '{:5_117:}','2.gif','20','20','50'],
						// 	['118', '{:5_118:}','3.gif','20','20','50'],
						// 	['119', '{:5_119:}','4.gif','20','20','50'],
						// 	['120', '{:5_120:}','5.gif','20','20','50'],
						// 	['121', '{:5_121:}','6.gif','20','20','50'],
						// 	['122', '{:5_122:}','7.gif','20','20','50'],
						// 	['123', '{:5_123:}','8.gif','20','20','50'],
						// 	['124', '{:5_124:}','9.gif','20','20','50'],
						// 	['135', '{:5_135:}','20.gif','20','20','50']
						// ],
					],
				},
				curpics: [],
				strCurEmoji: '',
			}
		},
		props: [],
		mounted() {
			let that = this;
			// document.body.onload = function() {
				this.showPics(event, this.emojis.emojis_type[0], 0, "emojis");
			// };
		},
		methods: {
			showPics: function(e, item, index, itype) {
				let that = this;
				e.stopPropagation();
				if("emojis" == itype) {
					this.strCurEmoji = item[1];
					this.curpics = [];
					let emojis_array = this.emojis.emojis_array;
					if(emojis_array && emojis_array.length > 0) {
						if(emojis_array[index] && emojis_array[index].length > 0) {
							emojis_array[index].forEach(function(val, no) {
								// console.log(val);

								let fontSize = 46.875;
								let eSrc = window.publicPath4 + '/image/smiley/' + item[1] + '/' + val[2];
								let eId = val[0];
								let eSize = 50;
								let eRow = 27;
								let eColumn = 7;
								let emoji_num = that.emojis.emoji_num;
								let aSizeW = (eSize*eRow/fontSize).toFixed(2);
								let aSizeH = (eSize*eColumn/fontSize).toFixed(2);
								let k = 0;
								that.curpics[k] = new Array();

								for(let i = 0; i < emoji_num; i++) {
									if(i - eColumn*k == eColumn) {
										k++;
										that.curpics[k] = new Array();
									}
									let valObj = {};
									let x = ((i - parseInt(i/eRow)*eRow)*eSize/fontSize).toFixed(2);
									let y = (parseInt(i/eRow)*eSize/fontSize).toFixed(2);
									let blanckPng = window.publicPath4 + '/image/smiley/b/b.png';
									let html = '<img name=' + itype + 
										' src=' + blanckPng + ' id=' + (eId + '_' + i) + 
										' style="background: url(' + eSrc + ') ' + (-x) + 'rem ' + (-y) + 'rem no-repeat;background-size: ' + aSizeW + 'rem ' + aSizeH + 'rem; ">';
									valObj = {
										id: eId,
										html: html,
									};
									that.curpics[k].push(valObj);
								}
							});
						}
					}
				}
				else if("smilies" == itype) {
					this.strCurEmoji = item[1];
					this.curpics = [];
					// document.querySelector(".emojiCon ul").innerHTML = "";
					let smilies_array = this.smilies.smilies_array;

					if(smilies_array && smilies_array.length > 0) {
						if(smilies_array[index] && smilies_array[index].length > 0) {
							let k = 0;
							that.curpics[k] = new Array();
							smilies_array[index].forEach(function(val, no) {
								if(no - 7*k == 7) {
									k++;
									that.curpics[k] = new Array();
								}
								let src = window.publicPath4 + '/image/smiley/' + item[1] + '/' + val[2];
								let id = val[0];
								let valObj = {
									id: val[0],
									html: '<img name=' + itype + ' src=' + src + ' id=' + id + '>',
								};
								that.curpics[k].push(valObj);
							});
						}
					}
				}
				else {
					return;
				}
			},
			returnImg: function(e) {
				// console.log(e.currentTarget.firstChild.outerHTML);
				e.stopPropagation();
				this.$emit('insertPic', e.currentTarget.firstChild.outerHTML);
			},
		},
	});
</script>
<style lang="less" scoped></style>